# Elektronika
# Teoria
## Prawo Ohma
Prawo Ohma opisuje zależność między napięciem, natężeniem i rezystancją.


Jeśli mamy źródło napięcie 9V i przepuścimy je przez opornik o wartości 330<span>&#8486;</span> to otrzymamy natężenie prądu 27mA.
$$
I = \frac{9V}{330\Omega} = 27mA
$$
Natężenie 27mA jest natężeniem dopuszczalnym dla diody żółtej (25mA, 2V) przez którą płynie prąd. Dobierając odpowiednią rezystancję mamy możliwość regulacji natężenia. Należy zwrócić uwagę również uwagę na to, że wraz ze wzrostem napięcia rośnie natężenie. Wraz ze wzrostem oporu maleje natężenie.
## Prawa Kirchhoffa
Pierwsze prawo Kirchhoffa odnosi się do sytuacji gdy prąd płynący w jakimś układzie ulega rozgałęzieniu, czyli gdy przewody z prądem łączą się w jakimś punkcie..

Ponieważ ładunki elektryczne nie mogą znikać, ani powstawać z niczego, a standardowy przewodnik właściwie nie potrafi ich gromadzić (wyjątkiem są kondensatory), to jasne jest, że:

Jeśli w jakimś czasie do rozgałęzienia dopłynął ładunek ***q***, to w tym samym czasie z tego rozgałęzienia musiał również taki sam ładunek ***q*** odpłynąć.

Ponieważ jednak ładunek wpływający, czy wypływający w jednostce czasu to nic innego jak natężenie prądu ***I***, więc prawo to można sformułować odwołując się do tego pojęcia natężenia prądu.
### Pierwsze prawo
*Suma natężeń prądów wpływających do rozgałęzienia, równa jest sumie natężeń prądów wypływających z tego rozgałęzienia.*

Powyższe prawo można zapisać wzorem:

`I.wpływające1 + I.wpływające2 + I.wpływające3 + ... = I.wypływające1 +  I.wypływające2 +  I.wypływające3 + ... `
### Drugie prawo
Drugie prawo Kirchhoffa jest uzupełnieniem pierwszego prawa Kirchhoffa. Oba te prawa łącznie pozwalają na tzw. „Rozwiązywanie obwodów”, czyli na obliczaniu natężeń prądów płynących w różnych gałęziach obwodu, dzięki znajomości oporów i sił elektromotorycznych źródeł.

Drugie prawo Kirchhoffa odnosi się do spadków napięć na elementach obwodu. Wynika ono ze zrozumienia faktu, że napięcia w obwodzie nie biorą się znikąd. Jeżeli gdzieś na oporniku jest jakieś napięcie, to znaczy, że musi też gdzieś istnieć źródło które wywołało prąd przepływający przez opornik. I wszystkie napięcia pochodzące od źródeł muszą sumować się z napięciami odkładającymi się na opornikach.

Drugie prawo można sformułować następujaco:

*W obwodzie zamkniętym suma spadków napięć na wszystkich odbiornikach prądu musi być równa sumie napięć na źródłach napięcia.*
### Oczka prądu
Na powyższym rysunku można zauważyć trzy oczka (symbolizowane przez kółka rysowane linią przerywaną) – dwa mniejsze i jedno większe, obejmujące poprzednie oczka.

- W pierwszym (małym) oczku mamy: ogniwo 1 (E1 , r1 ), ogniwo 2 (E2 , r2 ), opornik R2.
- W drugim (małym) oczku mamy: ogniwo 2 (E2 , r2 ), opornik R2 i opornik R1.
- W trzecim (dużym) oczku mamy: ogniwo 1 (E1 , r1 ) i opornik R1.
  Dla oczek został zaznaczony kierunek ich obiegu – w tym wypadku wszystkie oczka mają kierunek obiegu zgodny z kierunkiem obiegu zegara. Jednak można ustalić sobie przeciwny kierunek obiegu.

Zastosowanie prawa Kirchhoffa w ujęciu oczkowym będzie polegało na zliczaniu napięć podczas poruszania się zgodnie z ustalonym kierunkiem obiegu oczka.
Aby wartości napięć zliczały się prawidłowo przyjmiemy następujące reguły tej „ewidencji”:

1. Podczas sumowania w oczku napięć **na ogniwach** wartość tego napięcia bierzemy jako dodatnią, jeśli znak biegunów zmienia się z minusa (-) na plus (+). W przeciwnym wypadku wartość napięcia na ogniwie traktujemy jako ujemną.
2. Podczas sumowania napięć **na opornikach**, wartość napięcia na oporze bierzemy jako dodatnią, jeśli poruszamy przeciwnie do kierunku prądu. W przeciwnym wypadku (gdy opornik przebywamy zgodnie ze zwrotem prądu), spadek napięcia liczymy jako ujemny. Reguła ta stosuje się także do spadków napięć na oporach wewnętrznych ogniw.

W „oczkowym” sformułowaniu II prawo Kirchhoffa będzie miało postać:

*W oczku prąd suma spadków napięć na wszystkich odbiornikach prądu musi być równa zeru.*


Dla obwodu przedstawionego wcześniej, aby poprawnie zastosować II prawo Kirchhoffa, należy oznaczyć kierunki (niekoniecznie muszą one ostatecznie okazać się zgodne z rzeczywistością) prądów. Zostało to zrobione na rysunku obok.

Po uwzględnieniu tych oznaczeń, II prawo Kirchhoffa przybierze postać równań.

Dla pierwszego małego (górnego) oczka:

`E1 – I1 ∙ r1 + I2 ∙ R2 – E2 + I2 ∙ r2 = 0`

Dla drugiego małego (dolnego) oczka:

`E2 – I2 ∙ r2 – I2 ∙ R2 –  I3 ∙ R1 = 0`

Dla dużego oczka (przy rozwiązywaniu obwodów, trzecie równanie jest już nadmiarowe i nie należy go dołączać do zestawu, jeśli poprzednie wszystkie zostały wykorzystane):

`E1 – I1 ∙ r1 –  I3 ∙ R1 = 0`
## Natężenie
Wielkość fizyczna charakteryzująca przepływ prądu elektrycznego zdefiniowana jako stosunek wartości ładunku elektrycznego przepływającego przez wyznaczoną powierzchnię do czasu przepływu ładunku

Natężenie możemy opisać wzorem:
$$
I = \frac{q}{t}
$$
gdzie:
I - natężenie prądu w amperach [A],
q - ładunek elektryczny w kulombach [C],
t - czas [s].
## Napięcie
...
## Ładunek elektryczny
Ładunek elektryczny ciała (lub układu ciał) – fundamentalna właściwość materii przejawiająca się w oddziaływaniu elektromagnetycznym ciał obdarzonych tym ładunkiem. Ciała obdarzone ładunkiem mają zdolność wytwarzania pola elektromagnetycznego oraz oddziaływania z tym polem. Oddziaływanie ładunku z polem elektromagnetycznym jest określone przez siłę Lorentza i jest jednym z oddziaływań podstawowych.




Ładunek elektryczny ciała może być dodatni lub ujemny. Dwa ładunki jednego znaku odpychają się, a pomiędzy ładunkiem dodatnim i ujemnym działa siła przyciągająca.

Ładunki elektryczne są skwantowane, elektronowi przypisano elementarny ładunek ujemny, protonowi dodatni. Oddziaływania naładowanych cząstek elementarnych bada elektrodynamika kwantowa, opisuje się je za pomocą wymiany fotonu.

Często używa się skrótowego pojęcia ładunek elektryczny dla ciała obdarzonego ładunkiem elektrycznym.

[https://pl.wikipedia.org/wiki/%C5%81adunek_elektryczny](https://pl.wikipedia.org/wiki/Ładunek_elektryczny)
## Kulomb
Jednostka ładunku elektrycznego w układzie SI. Nazwa kulomb pochodzi od nazwiska francuskiego uczonego Charles’a Coulomba.

1 kulomb (1 C) to ładunek elektryczny przenoszony w czasie 1 sekundy (1 s) przez prąd o natężeniu wynoszącym 1 amper (1 A)
$$
1C=1A*1s
$$
Może być też wyrażony przy użyciu pojemności i napięcia, gdzie 1 kulomb jest równy iloczynowi jednego farada i jednego wolta
$$
1C=1F*1V
$$
Jeden kulomb może być przeliczony na wielokrotność ładunku elementarnego (ładunku elektronu):
$$
1C=6.241509126*10^{18}e
$$
# Rezystory
## Łączenie szeregowe
$$
R_Z = R_1 + R_2 + R_3
$$
## Łączenie równoległe
$$
\frac{1}{R_Z} = \frac{1}{R_1} + \frac{1}{R_2} + \frac{1}{R_3}
$$

## Dzielnik napięcia
Jest to układ składający się z dwóch oporników połączonych szeregowo. Odpowiedni stosunek oporników pozwala podzielić napięcie.


Wzór na obliczenie napięcia wyjściowego U<sub>wy</sub>. Napięcie wyjściowe jest nazywane również napięciem na drugim oporniku.
$$
U_{wy}=U_{we}*\frac{R2}{R1+R2}
$$
Ogólnie można przyjąć, że przez oba rezystory płynie takie samo natężenie. Czyli mamy.
$$
I=\frac{U_{we}}{R1+R2}
$$
Napięcie R2 jest równe.
$$
U_{wy}=I*R2=U_{we}*\frac{R2}{R1+R2}
$$
Jak widać ze wzoru wartość napięcia wyjściowego jest zawsze mniejsza (lub równa, gdy R1=0 od napięcia wejściowego.

Działanie:

- Im większe jest R<sub>1</sub> to współczynnik będzie coraz mniejszy, czyli napięcie będzie coraz mniejsze.
- Im większe jest R<sub>2</sub> to współczynnik będzie coraz większy, czyli napięcie będzie coraz większe.
# Sterowanie
## Sterowanie za pomocą IR
Do sterowania można wykorzystać podczerwień o której piszę w innym rozdziale.


## Line follower
Trasa może być wyznaczona za pomocą linii, wtedy do sterowania można wykorzystać fotorezystor oraz diodę.


Dioda świeci na podłoże a fotorezystor mierzy poziom odbicia. W zależności od tego czy światło pada na czarną izolację czy na białe tło odczyty z fotorezystora mogą być różne (to trzeba zmierzyć doświadczalnie).

Sterowanie polega na ciągłym odczycie danych z fotorezystora i korekcie w odpowiednim kierunku.

Przy jednym fotorezystorze:


Przy dwóch:


Podczas budowy takie urządzenia duży wpływ na efekt finalny ma rozmieszczenie czujników.
## Sterowanie za pomocą krańcówek
Do sterowania wykorzystywane są przełączniki typu krańcowego np. takiej jak poniżej.


Dwa takie przełączniki krańcowe można umieścić na czole pojazdu. Jeśli krańcówka dotknie przeszkody krańcówka się załączy.
## Sterowanie za pomocą fotorezystorów
Do sterowania można wykorzystać fotorezystory. Montujemy dwa fotorezystory na krańcach pojazdu.


Sterować należy tak aby niwelować różnicę natężenia padającego światła między dwoma fotorezystorami np. jeśli na fotorezystor A pada większe światło to oznacza, że pojazd trzeba przekręcić w kierunku A aby na fotorezystor B padało większe światło.

# Fale elektromagnetyczne
Jak powszechnie wiadomo światło ma naturę falowo-korpuskularną. Czyli po części zachowuje się jak fala, a po części jak strumień cząsteczek. Wiąże się z tym szereg zjawisk fizycznych, które mają praktyczne zastosowanie w robotyce. Gałęzią fizyki zajmującą się tymi zjawiskami jest **optyka**. Promieniowanie świetlne jest częścią promieniowania elektromagnetycznego o określonej długości fal. Przyjrzyjmy się spektrum fal elektromagnetycznych:


Na tym schemacie dobrze widać jak mały zakres spektrum stanowi światło widzialne. Ultrafiolet i podczerwień, które również wchodzą w skład promieniowania świetlnego mają **dużo większe zakresy**. Cały zakres promieniowania świetlnego podlega tym samym prawom fizyki, jednak to właśnie podczerwień została sobie upodobana przez konstruktorów wielu urządzeń.

Światło widzialne nie sprawdziło by się tak dobrze w elektronice, ponieważ ludzie wytwarzają dużo więcej zakłóceń w tym paśmie. Co więcej w niektórych przypadkach "niewidzialność" może być atutem (np.: w wojsku). **Promieniowanie ultrafioletowe natomiast jest szkodliwe dla żywych organizmów.**

Innym rodzajem fal elektromagnetycznych wykorzystywanych w robotyce są **fale radiowe**. Jednak do ich nadawania i odbioru potrzeba innego rodzaju sprzętu. Natomiast fale o długości mniejszej niż ultrafiolet należą już do promieniowania jądrowego i **mogą być bardzo niebezpieczne.**

Mimo, iż podczerwień nie jest widzialna dla ludzkiego oka, może ona zostać zarejestrowana przez kamery i aparaty, szczególnie te tańsze. Filtr podczerwieni w tych urządzeniach nie jest zbyt wysokiej jakości i przepuszcza sporą część światła w paśmie podczerwonym.

Dlatego właśnie możemy za pomocą kamery w telefonie czy w laptopie zobaczyć jak świeci dioda w pilocie podczas zmieniania kanałów.

Dzięki użyciu takich prostych kamer możemy łatwo sprawdzić czy interesujący nas układ działający w podczerwieni działa. Źródłem promieniowania podczerwonego są wszystkie ciała, a jego natężenie zależy od temperatury. **Jest to podstawa działania kamer termowizyjnych.**

Źródła światła takie jak słońce, czy tradycyjne żarówki emitują również podczerwień. Mogą one być więc źródłami zakłóceń dla naszych układów. Wiemy już skąd wynika wyższość promieniowania podczerwonego nad innymi, przejdźmy teraz do krótkiego omówienia zjawisk fizycznych.
## Emisja światła
W opisie fizycznym przyjmuje się, że wiązka światła rozpoczyna się w źródle, a następnie **rozchodzi się w linii prostej.** Źródła emitują światło w różnych kierunkach. Z niektórych promienie rozchodzą się sferycznie, inne natomiast mogą być skupione na jednym kierunku i rozchodzić się tylko w jakimś niewielkim kącie.

Z punktu widzenia robotyki **wiązka powinna rozchodzić się w interesującym nas kierunku.** W większości przypadków w kierunku, w którym znajduje się odbiornik. Rozchodzenie się światła na boki jest stratą energii oraz źródłem potencjalnych zakłóceń.
## Kontakt światła z powierzchnią
Jeżeli wiązka światła rozchodząca się w danym ośrodku natrafi na powierzchnię jakiegoś ciała, zachodzą dwa zjawiska: **odbicie** oraz **załamanie światła**. Dobrze pokazuje to zdjęcie:


Wiązka światła **odbija się od przeszkody w sposób symetryczny.** Oś symetrii wychodzi z punktu odbicia, natomiast **kąt odbicia jest równy kątowi padania**. Załamanie jest spowodowane zmianą prędkości rozchodzenia się światła związaną ze zmianą ośrodka.

Jaśniejsze przedmioty odbijają więcej światła. Poza tym różne przedmioty bardziej odbijają różne długości fal promieniowania świetlnego. Stąd właśnie biorą się kolory.

Odbicie jest jednym z najczęściej wykorzystywanych przez robotyków zjawisk. Dlatego w fazie projektowania należy wziąć pod uwagę chropowatość i kolor powierzchni od jakich wiązka światła będzie się odbijać oraz obecność innych powierzchni od których odbicie może być dla nas zakłóceniem.
## Interferencja
Jest to nakładanie się różnych fal sprawiające, że w niektórych miejscach się wzmacniają, a w innych osłabiają. Najlepiej widoczne dla fal o zbliżonych częstotliwościach. Oto symulacja interferencji na Wikipedii:


Przykład interferencji dwóch fal.

Jest to znaczący problem w technice radiowej. Występuje również dla fal świetlnych, ale nie jest aż tak duży. Często występuje razem ze zjawiskiem odbicia kiedy to wiązka wysłana interferuje z odbitą.
## Dyfrakcja
Jeżeli wiązka trafi na szparę, to zmienia sposób rozchodzenia się. Szczególnie jeśli szpara ma szerokość zbliżoną do długości fali. Zjawiska dyfrakcji i interferencji często zachodzą jednocześnie.

## Rozproszenie światła
Jeżeli światło przechodzi przez mieszaninę o określonych parametrach, jej cząsteczki pochłaniają część energii wiązki i staje się ona mniej skupiona. Zjawisko to jest dobrze widoczne np.: w czasie mgły. Rozproszenie światła jest źródłem zakłóceń.
# Podczerwień
Podczerwień (ang. infrared, IR), to niewielki fragment widma fal elektromagnetycznych, którego nasze oko nie jest w stanie zobaczyć. Długość fali podczerwonej jest większa od długości fali światła czerwonego, czyli ma mniejszą częstotliwość.

Przedstawia to poniższy rysunek:


Fale podczerwone znajdują się między mikrofalami, a światłem widzialnym, czyli w bardzo szerokim zakresie. Z tego powodu, zostały podzielone na trzy główne grupy:

1. bliska podczerwień: od 700nm do 1μm,
2. krótka, średnia i długa podczerwień: od 1μm do 15μm,
3. daleka podczerwień: od 15μm do 1mm.


****Bliska podczerwień jest słabo tłumiona przez atmosferę, dlatego dobrze nadaje się do prowadzenia transmisji w powietrzu. W obszarze krótkiej i średniej podczerwieni pracują światłowody, służące do przesyłu danych.****

Z kolei, długa podczerwień i część dalekiej transportuje ciepło. Ten podział jest umowny i zależny od konkretnego zastosowania, ale pozwala zgrubnie ocenić, czym będziemy się zajmować.

Tak jak zostało wspomniane podczerwień może być wykorzystywana do komunikacji. W związku z tym warto wyjaśnić jeszcze jedno pojęcie. Transmisja polega na przesłaniu informacji między dwoma urządzeniami. Najczęściej wiadomość ta ma postać ciągu zer i jedynek, zrozumiałych dla odbiornika.

Przykładem transmisji jest obsługa telewizora za pomocą pilota. Po wciśnięciu przycisku, pilot transmituje do telewizora ciąg kilkunastu bitów. Odbiornik wykrywa odpowiedni ciąg impulsów, interpretuje go i wykonuje żądane zadanie.

Najczęściej, do nadawania służą specjalne diody świecące lub lasery. Do naszych zastosowań, czyli transmisji w powietrzu na niewielkich dystansach, wykorzystuje się jedynie LEDy. Są one tanie, niewielkie oraz proste w użyciu.

Diody nadawcze (IR), bo tak są określane, również funkcjonują w ten sam sposób. Różnią się kryształem emitującym światło. Oczywiście wszystko po to, aby miało ono odpowiednią długość fali. Obudowy są najczęściej przezroczyste lub - rzadziej - czarne lub niebieskie.

Czasami w Internecie można spotkać stwierdzenie, że diody nadawcze z ciemną obudową są słabsze. Jest to mit. Ciemny kolor soczewki dla podczerwieni jest "przezroczysty".

Konkretne informacja na temat diody poznamy sprawdzając jej podstawowe parametry (do znalezienia w dokumentacji). W przypadku nadajników IR warto sprawdzić:

- długość emitowanej fali,
- maksymalna moc ciągła,
- maksymalny prąd ciągły (rzędu kilkudziesięciu miliamperów),
- maksymalny prąd w impulsie (rzędu nawet amperów),
- napięcie pracy,
- kąt świecenia,
- rozmiar obudowy.

Wykorzystanie diod nadawczych różni się od świecących tym, że zasilamy je w sposób impulsowy. Nadawanie odbywa się poprzez miganie z częstotliwością rzędu kilkudziesięciu kiloherców, impulsami o wypełnieniu rzędu zaledwie kilku procent.

Parametry przykładowej diody IR mogą wyglądać np. tak:

- długość emitowanej fali: 940nm,
- maksymalna moc ciągła: 100mW,
- maksymalny prąd ciągły: 20mA,
- napięcie przewodzenia: max 1,6V,
- kąt świecenia: 20°,
- rozmiar obudowy: 5 mm.

Podłączenie diody do prądu stałego pozwoli na przepuszczenie przez nią prądu nie większego niż:

$$
I_{max} = P_{max}/U_{f} = 100mW/1.6V = 62.5mA
$$
Diody nadawcze przystosowane są do pracy impulsowej, w przeciwieństwie do wcześniej omawianych diod święcących, które najczęściej pracują w trybie ciągłym. Załóżmy, że wypełnienie impulsów wynosi 10%, co jest wartością często spotykaną.

Wówczas, dopuszczalny prąd w impulsie wyniesie:
$$
I_{max} = P_{max}/U_{f} = 100mW/(1.6V*10\%) = 625mA
$$

Większy prąd przekłada się na większą intensywność świecenia. To jest główny powód, dla którego opłaca się zasilać diody impulsowo. Chcemy, aby nasz pilot do TV działał praktycznie z każdego miejsca w pokoju. Nikt nie będzie przykładał go np. na 10 cm przed odbiornik.
## Odbiorniki TSOP
W sprzedaży można spotkać dwie główne grupy elementów czułych na promienie podczerwone: fotodiody i fototranzystory. Ich zastosowanie w realizacji toru transmisyjnego jest jednak bardzo trudne. Dlatego omówię scalony odbiornik podczerwieni na przykładzie układu TSOP31236. Poniżej widoczne jest zdjęcie czujnika:


- złącze 1 GND,
- złącze 2 Vs,
- złącze 3 OUT.

Inne układy to np: TSOP1736, TSOP1738.

Scalone odbiorniki mają nieprzezroczyste (dla światła widzialnego) obudowy, aby uodpornić się na zakłócenia. W ich wnętrzu znajduje się struktura, której schemat blokowy widoczny jest poniżej:


Elementem odbiorczym jest fotodioda PIN, czyli odpowiednio zbudowana dioda półprzewodnikowa z odsłoniętą strukturą. Włącza się ją w polaryzacji zaporowej, przez co prąd przez nią nie płynie. Padający foton uderza w tę strukturę i generuje nośnik prądu elektrycznego, umożliwiając chwilowy przepływ prądu. Impulsy prądu z fotodiody są odbierane przez wzmacniacz wstępny. Na jego wyjściu znajduje się wzmocniony sygnał elektryczny, proporcjonalny do natężenia światła odbieranego przez diodę.

Sygnał ten trafia na wzmacniacz o automatycznie regulowanym wzmocnieniu (AGC - *Automatic Gain Control*). **Filtr pasmowoprzepustowy** (ang. *Band-pass filter*) wycina z odbieranego sygnału tylko tę częstotliwość, do której odbiornik jest dostosowany. **Tutaj jest to 36kHz**.

Dwie cyfry, umieszczone na końcu symbolu scalonego odbiornika podczerwieni, najczęściej określają częstotliwość (w kHz) z jaką układ ten współpracuje. W naszym przypadku: TSOP312**36** oznacza **36kHz.**

Ponownie wzmocniony i odfiltrowany sygnał, służy dwóm celom. Po pierwsze, trafia na demodulator, gdzie impulsy o żądanej częstotliwości są zamieniane na ciągły sygnał stały. Chcąc wysłać impuls trwający np. sekundę, musimy go zamienić na jednosekundowy ciąg impulsów o częstotliwości 36kHz. Demodulacja jest procesem odwrotnym i pozwala odtworzyć pierwotną postać sygnału.

Modulacja fali podczerwonej znaną częstotliwością pozwala odbiornikowi odróżnić ją od zakłóceń lub innych źródeł światła np. od migających świetlówek.

Po drugie, amplituda wychodzącego z filtru sygnału stanowi dla regulowanego wzmacniacza informację, jakie wzmocnienie ma ustawić. Jest to klasyczny układ z ujemnym sprzężeniem zwrotnym: jeżeli sygnał na wyjściu jest zbyt silny, wzmocnienie maleje. Jeżeli zaś jest słaby, wzmocnienie jest zwiększane. Pozwala to na pracę odbiornika zarówno przy świeceniu diodą nadawczą wprost na niego, jak i oświetlając go światłem odbitym np. od ściany.

Wyjście obsługuje tranzystor bipolarny, który wchodzi w stan nasycenia po wykryciu fali. Oznacza to, że odebranie jest sygnalizowane niskim stanem logicznym. W stanie spoczynku, na wyjściu panuje stan wysoki, co zapewnia rezystor 30kΩ.

Przez kolektor tego tranzystora może płynąć prąd o wartości nieprzekraczającej 5mA, niekiedy 10mA. Zatem bezpośrednie sterowanie np. przekaźnikiem nie jest możliwe.

Producenci wypuścili dwa rodzaje scalonym odbiorników. Jeden, taki jak omawiany TSOP31236, sygnalizuje na swoim wyjściu fakt odebrania fali o zadanej częstotliwości tak długo, jak długo ona trwa. Drugi zaś rodzaj, jest w stanie wypuścić impuls o długości kilku milisekund, n**awet jeśli dioda nadawcza pracuje wielokrotnie dłużej. Kolejny impuls wystąpi po wyłączeniu i ponownym załączeniu nadawania.

Niestety, lub na szczęście, żaden element nie jest idealny. Każdy scalony odbiornik będzie reagował na inną długość fali świetlnej, jak i na inną częstotliwość nośną, ale jego czułość będzie niższa. P**rzedstawiają to wykresy zaczerpnięte z noty katalogowej:



Przykładowo, kiedy w nadajniku umieścimy diodę nadawczą, która emituje falę o długości **850nm**, czułość wyniesie **jedynie 30%** tej, którą uzyskalibyśmy stosując analogiczną diodę na 950nm. To samo dotyczy częstotliwości impulsów zasilających diodę: jeżeli z nominalnych 36kHz spadnie ona np. do 34,2kHz, czyli o **5%**, to czułość spadnie do **70%** nominalnej wartości.

Większość scalonych odbiorników wymaga **filtracji napięcia zasilającego** (stąd są kondensatory). W nocie katalogowej można znaleźć taki schemat:


Niektórzy są przekonani, że jeżeli zastosują dobrą stabilizację i filtrację napięcia zasilającego cały układ, to mogą śmiało zapomnieć o tych dodatkowych elementach.

> **Jest to poważny błąd!** Z moich doświadczeń wynika, że pominięcie tych elementów powoduje całkowity brak reakcji odbiornika lub działanie bardzo chaotyczne.

Podczerwień, pomimo prostoty użycia i niskich cen komponentów nadawczo/odbiorczych, ma główną wadę: wymaga widoczności nadajnika i odbiornika.**

To jest jeden z powodów, dla którego IrDA, czyli system bezprzewodowej transmisji danych oparty na podczerwieni, został bezpowrotnie porzucony. Wyparły go technologie wykorzystujące fale radiowe, jak Bluetooth i WiFi. Niemniej jednak, w prostych zastosowaniach podczerwień nadal ma zastosowanie, dlatego warto ją znać.

**Przykład układu**

Przykład układu z wykorzystaniem odbiornika. Celem tego układu jest odebranie sygnału z nadajnika i przeniesienie go na diodę.


Dioda 1N4148, włączona szeregowo w zasilanie, obniża napięcie z baterii o ok. 0,7V. Było to konieczne, ponieważ producent nie dopuszcza zasilania odbiornika napięciem wyższym niż 5,5V.

Z kolei, **pakiet świeżych baterii 1,5 V zapewnia napięcie 6 V lub nieco wyższe**. Jedna dioda z powodzeniem wystarcza do jego redukcji. Dzięki temu zabiegowi nie musieliśmy korzystać ze stabilizatora napięcia.

Rezystor 10kΩ zapewnia **stały przepływ prądu** przez diodę, przez co napięcie zasilające odbiornik nie zależy w dużym stopniu od prądu pobieranego przez układ.

Włącz zasilanie i celuj w stronę odbiornika pilotem np. od TV, wysyłając różne komendy. Dla niektórych pilotów odbiornik będzie bardzo czuły (odbierze transmisję z dużego dystansu). Czasem może być konieczne przysunięcie pilota na małą odległość.

Piloty do sprzętu RTV również wykorzystują diodę nadawczą IR oraz odbiornik. Tym razem każdy z tych elementów znajduje się w odrębnym układzie. Pilot jest naszym **nadajnikiem** i składa się z przycisków oraz diody IR.

**Odbiornik** natomiast jest umieszczony w elemencie docelowym czyli na przykład w telewizorze, radiu czy w najbardziej interesującym nas przypadku - w robocie. Każdy przycisk pilota ma przypisany pewien kod, który wysyła do odbiornika. Tam natomiast znajduje się układ, który podejmuje odpowiednią akcję w zależności od otrzymanego kodu.

Istnieje ogromna ilość standardów kodowania używanych w pilotach.

Większość dużych producentów sprzętu elektronicznego takich jak Philips, Sony, Panasonic itp. ma po kilka standardów kodowania, a każdy z nich posiada uaktualnienia i nowe wersje. W tym wypadku wzięcie dowolnego pilota i wykorzystanie go do własnych celów jest znacznie utrudnione. Trzeba najpierw zidentyfikować standard.
## Kodowania
Prześledźmy zatem podstawowe sposoby kodowania. Zdecydowana większość pilotów działa na sygnale modulowanym. Zdarzają się również, głównie w starszych modelach, układy działające na sygnałach ciągłych. **Popularne częstotliwości modulujące** to: 36kHz, 38kHz, 40kHz, 56kHz. Natomiast długość najkrótszego sygnału zakodowanego w ten sposób wynosi zwykle 8-16 impulsów. Liczba ta nie może być za mała, aby zostawić odbiornikowi czas na wykrycie przychodzącego sygnału.

Nieraz w danym pomieszczeniu może znajdować się kilka odbiorników tego samego kodu. Żeby uniknąć nieporozumień, każdy z nich posiada swój własny kod systemu. Jest on wysyłany w ramce danych i w ten sposób odbiornik wie, czy komenda adresowana jest do niego. Nie wszystkie standardy zawierają kod systemu, szczególnie te gorsze, starsze lub nieprzystosowane do pracy w środowisku z wieloma odbiornikami.

Warto wiedzieć, że w pilotach nie wykorzystuje się dokładnych rezonatorów kwarcowych, tylko układy RC.

Powodem takiego wyboru jest delikatność kwarców, a jak wiemy zapewne z własnego doświadczenia taki pilot telewizora w swoim życiu przechodzi wiele wzlotów i upadków...  Dlatego częstotliwość modulująca może być generowana z pewnym błędem, a **detektory posiadają odpowiednią tolerancję.**

Producenci zwykle nie chwalą się dokładnymi opisami swoich standardów. Dlatego o wielu z nich trudno znaleźć informacje. Tym bardziej, że jak już wspomniałem, istnieje ogromna liczba wersji. Niemniej jednak o kilku z nich można powiedzieć coś więcej. Na podstawie tych informacji możliwe jest rozkodowanie innych kodów.
## Standard RC5
Został wynaleziony przez Philipsa ponad 20 lat temu. Kodu tego używa nie tylko Philips, ale również wiele innych marek w tym te mniej znane. Jest to najczęściej używany standard wśród amatorskich konstrukcji. Popularność swą zawdzięcza dużej dostępności informacji na ten temat, a szczególnie [nocie aplikacyjnej Atmela](http://www.atmel.com/dyn/resources/prod_documenprod_documentsts/doc1473.pdf) . Jest tam zawarty algorytm dekodera oraz kod źródłowy w asemblerze.

Przejdźmy zatem do omówienia standardu RC5. Używa on częstotliwości **36kHz** i [kodowania typu Manchester](http://pl.wikipedia.org/wiki/Kod_Manchester). Oznacza to, że wartości logiczne bitów odpowiadają rosnącemu lub opadającemu zboczu w środku trwania sygnału bitu. Każdy bit trwa 1.776ms, a po 889us od jego rozpoczęcia następuje zmiana zbocza. Zmiana z niskiego na wysokie oznacza "1", a z wysokiego na niskie - 0. (przy opisie stanów logicznych przyjąłem, że wysoki to kiedy czujnik odczytuje przychodzący impuls, a niski kiedy jest w stanie spoczynku. Niektóre dekodery w stanie spoczynku wskazują logiczną jedynkę. Wtedy należy odwrócić podane tutaj wartości) Każda ramka ma więc taką samą długość i składa się z 14 bitów. Są to kolejno:

- dwa bity startu pozwalające odbiornikowi na wykrycie transmisji
- bit toggle mówiący czy przycisk został dopiero naciśnięty, czy jest trzymany przez dłuższy czas
- 5 bitów systemu
- 6 bitów komendy

Jeżeli przycisk jest wciśnięty przez dłuższy czas, pilot czeka 114ms po czym wysyła komendę ponownie. Przez cały czas przyciskania tego samego przycisku **bit toggle ma taką samą wartość logiczną.** Za każdym razem gdy zostanie wciśnięty inny przycisk, bit toggle zmienia swą wartość logiczną.

Poniżej graficzne przedstawienie kolejnych bitów oraz przykładowa zakodowana ramka danych:


Dwa **pierwsze bity** oznaczają początek ramki i mają wartość "1" (jest to prawdą dla podstawowej wersji RC5). Trzeci bit nazywany jest po angielsku **toggle** i niestety ciężko znaleźć dla niego prostą nazwę w języku polskim. Na grafice posłużyliśmy się nazwą bit przełącznikowy, podpatrując ją na Wikipedii... Nazwa nie jest jednak kluczowa. Ważne, aby zapamiętać znaczenie tego bitu!

Następnie, w ramce danych, znajdziemy 5 bitów adresowych. Na ich podstawie odbiorniki mogą rozpoznawać, czy dane są wysyłane właśnie do nich. W praktyce pozwala to na korzystanie z kilku pilotów jednocześnie (np.: do telewizora i do DVD), bez wzajemnego zakłócania komunikacji.

Ostatnie 6 bitów danych zawiera komendę. Każdy klawisz na pilocie ma przypisany swój numer. Dzięki temu telewizor może rozróżnić komendy np.: "przełącz kanał", "zwiększ głośność" itd. Całość może wydawać się zawiła, jednak wszystko wyjaśni się podczas testów w praktyce!
## Standard RC6
RC6, jak sama nazwa wskazuje młodszy brat RC5 posiadający kilka modyfikacji. Tak samo jak jego poprzednik korzysta z częstotliwości 36kHz i kodowania typu Manchester. **Jest on jednak nieco bardziej skomplikowany.** Tym razem mamy trzy rodzaje sygnałów z czego dwa są wykorzystywane tylko w nagłówku czyli części inicjalizacyjnej. Oto one:

- **bit startowy** - stan wysoki trwa 2.666ms a następnie stan niski przez 889us. Ma on zawsze taką samą postać
- **bit toggle** - trwa przez 1.8ms i w połowie jego długości (po 889us) następuje zmiana zbocza
- **bit danych** - trwa przez 889us i w połowie następuje zmiana zbocza.

Należy pamiętać, że kodowanie typu Manchester w kodzie RC6 jest odwrotne niż w RC5! Czyli "1" to zmiana z wysokiego na niski, natomiast 0 to zmiana z niskiego na wysoki.

**Rodzaje sygnałów występujące w standardzie RC6:**


Przejdźmy teraz do wyglądu ramki danych:

- bit startowy
- bit o wartości logicznej "1" (kodowany jak bity danych) służący do kalibracji odbiornika
- 3 bity trybu operacji (również kodowane jak bity danych). Dla kodowania RC6 tryb ustawiony jest na 000
- bit toggle działający podobnie jak w przypadku RC5, trzy powyższe elementy składają się na nagłówek
- 8 bitów systemu
- 8 bitów komendy

Po odczytaniu ostatniego bitu komendy odbiornik musi znajdować się w stanie spoczynku przez co najmniej 2.666ms.

Istnieje również standard **RC6A** dla którego bity trybu operacji przyjmują wartości **110**. W tym wypadku po bicie Toggle dochodzi kod producenta który wykupił od Philipsa licencję na użytkowanie kodu w swoich produktach. Jeżeli pierwszy bit kodu producenta wynosi "0" to długość całego kodu wynosi 8 bitów (pozwala to na zakodowanie do 128 różnych producentów), jeśli natomiast wynosi "1" to cały kod producenta liczy 16 bajtów pozwalając zakodować ponad 32 000 różnych producentów.
## Kodowanie długością impulsu
Mimo, że w konstrukcjach amatorskich króluje kod RC5 wykorzystujący kodowanie typu Manchester to dużo więcej standardów do kodowania wartości logicznych używa zmiennej długości impulsów. Zasada jest bardzo prosta.

Każdy bit rozpoczyna się stanem wysokim trwającym stałą ilość czasu. Następnie następuje stan niski którego długość przyjmuje jedną z dwóch wartości oznaczającą odpowiednio "1" lub "0" logiczne. W niektórych standardach to stan wysoki ma zmienną długość, ale mechanizm pozostaje ten sam. Istnieje ogromna ilość standardów korzystająca z tego rodzaju kodowania.

Wykorzystują one różne częstotliwości fali nośnej, a niektóre (głównie starsze) działają na sygnałach niezmodulowanych. Każdy jednak korzysta z ramki danych w której możemy wyróżnić kod systemu, kod komendy i opcjonalnie dodatkowe bity np.: startu czy toggle. Wszystkie te standardy łatwo odróżnić od kodowania typu Manchester po zmiennej długości ramki danych.


Jeżeli ktoś nie chce bawić się w przystosowywanie istniejącego pilota, **zawsze może zbudować swój własny i wykorzystać w nim autorski sposób kodowania.** Można też zakodować go według istniejącego standardu np. z naszego domowego telewizora (przy okazji jest to świetny sposób, aby trochę podenerwować domowników). Pilot taki składał by się z przycisków, kontrolera oraz diody nadawczej zamkniętych w obudowę. Temat zostawiam do własnych testów.
# Pozostałe
## Histereza
Zawisko zależności aktualnego stanu układu od stanów w poprzedzających chwilach. Inaczej – opóźnienie w reakcji na czynnik zewnętrzny. Zjawisko odkrył i nazwał James Alfred Ewing w roku 1890. Ponadto termin ten został zapożyczony przez nauki społeczne.

Najbardziej znane przypadki histerezy występują w materiałach magnetycznych, głównie w ferromagnetycznych, gdzie namagnesowanie następuje dopiero po pewnym wzroście zewnętrznego pola magnetycznego. Histereza występuje także w układach mechanicznych (materiały elastyczne, mięśnie) oraz w procesie adsorpcji.

W urządzeniach, w których następuje wielokrotne magnesowanie (np. rdzenie transformatorów), histereza postrzegana jest jako problem, ponieważ jej pole powierzchni jest proporcjonalne do strat energii podczas jednego cyklu przemagnesowania.

## Zjawisko drgania styków
Zjawisko dotyczy przycisków. Zjawisko polega na tym, że w momencie zwarcia styków powstaje kilka sygnałów zwarcia i rozwarcia. Podobna sytuacja zachodzi przy rozwarciu przycisków, podobnie generowany są sygnały zwarcia i rozwarcia.

Opisane zjawisko było problematyczne przy obsłudze rejestru przesuwnego (wejście ST_CP, SH_CP) gdzie wejście było wrażliwe na zbocza. Aby zmniejszyć te zakłócenia potrzebne było dodanie kondensatora oraz opornika, które działały jak filtr.

Zjawisko również będzie miało wpływ np. na odczytywanie sygnałów w Arduino.

Zjawisko zostało dość dobrze opisane w książce *Arduino 65 Praktycznych Projektów s.81.*

Poniżej został przedstawiony przykład podłączenie przycisku pod pin D2. W przypadku bezpośredniego podłączenia, zwarcie przycisku generowało zniekształcony sygnał, co powodowało np. że mikro kontroler odczytywał to jako kilkukrotne przyciśnięcie. Dodanie kondensatora powoduje, że sygnał jest filtrowany. Ważna jest również wielkość kondensatora. Ten musi być dość niskiej pojemność aby szybko się mógł naładować. W moim przypadku jest to kondensator elektrolityczny o pojemności 1&micro;F, przy 250&micro;F kontroler nie działał poprawnie, zawieszał się.

Drugim elementem jest podłączenie tgz. rezystora ściągającego,  na naszym schemacie jest to rezystor R1. Jest rezystor ściągający do masy, powoduje to, że gdy przycisk jest rozwarty na pinie D2 jest prawie na zero.


W przypadku pionów wrażliwych na wzgórza/dołki wymagane jest dodanie dodatkowego opornika R2, który dodatkowo ogranicza natężenie.

W przypadku układu 74HC595 na piny DS/OE/MR nie był wymagany filtr ponieważ piny reagują na stan wysoki lub niski.

Na piny `ST_CP/SH_CP` wymagane było dodanie takiego filtru ponieważ reagują one na wzgórza i dołki.


## Przepływ prądu przez RCL
Przez cewkę, kondensator oraz opornik prąd przepływa w różny sposób.

## Oznaczenie przewodów
Zgodnie z normami, w instalacjach elektrycznych stosuje się tylko niektóre kolory żył:

**Kolor czarny (L)** (szary lub brązowy) – przewód liniowy (przewód fazowy)– jest to przewód będący pod napięciem fazowym. Nie należy podłączać go w miejsce przewodu PE, ponieważ grozi to niebezpiecznym porażeniem prądem.

**Kolor żółto-zielony (PE)** – przewód ochronny –ten przewód elektryczny chroni przed porażeniem elektrycznym. Umożliwia wyrównywanie potencjały elektryczne (przewód wyrównawczy) lub połączenie głównego zacisku z uziomem (przewód uziemiający).

**Kolor niebieski (N)** – przewód neutralny („zero roboczy”, „zerowy”) – przewód ten służy do przesyłania energii elektrycznej – łączy się z punktem neutralnym sieci. W automatyce, w szczególności w obwodach siłowych może przesyłać również prąd zmienny lub stały; natomiast w obwodach niskonapięciowych oznacza ujemny przewód zasilania.

**Kolor żółto-zielony z niebieskim zabarwieniem (PEN)** lub niebieski z żółto-zielonym zabarwieniem na końcu przewodu –łączy on funkcje przewodu neutralnego (N) oraz przewodu ochronnego (PE)

**Kolor biały** – przewód ten w instalacjach starego typu oznaczał przewód neutralny (N)

**Kolor ciemnoniebieski lub granatowy** – oznacza ujemny przewód zasilania w obwodach niskonapięciowych. Natomiast w automatyce wykorzystuje się go do przesyłania prądu stałego w obwodach sterujących, bez względu na biegunowość lub do oznaczania żyły kierunkowej.

**Kolor czerwony** – oznacza dodatni przewód zasilający w obwodach niskonapięciowych. W starych instalacjach elektrycznych przewód ten oznaczał fazę (przewód liniowy L) Natomiast w automatyce przewodzi prąd przemienny w obwodach sterujących;.

**Kolor pomarańczowy** – używany jest czasem, jako przewód fazowy.
## Częstotliwość
Częstotliwość  – wielkość fizyczna określająca liczbę cykli zjawiska okresowego występujących w jednostce czasu. W układzie SI jednostką częstotliwości jest herc [Hz]. Częstotliwość 1 herca odpowiada występowaniu jednego zdarzenia (cyklu) w ciągu 1 sekundy. Najczęściej rozważa się częstotliwość w ruchu obrotowym, częstotliwość drgań, napięcia, fali.

## Komunikacja bezprzewodowa
Omówione w poprzednim rozdziale piloty były już przykładem komunikacji bezprzewodowej. Miała ona jednak szereg ograniczeń. Przede wszystkim transmisja danych odbywa się jednokierunkowo. Poza tym transfer danych zachodzi w ślimaczym jak na mikroprocesory tempie.

Odczyt jednej ramki danych zajmuje kilkanaście milisekund, a przerwy między kolejnymi po kilkadziesiąt. Dlatego właśnie powstał inny standard transmisji danych - **IrDA**. Nie rozwiązuje on oczywiście problemów niemożliwych do obejścia jeśli używamy podczerwieni czyli konieczności "kontaktu wzrokowego" komunikujących się urządzeń czy ograniczonego zasięgu, ale znalazł wiele praktycznych zastosowań.


Technologia IrDA jest rozwijana od początku lat 90-tych i doczekała się już kilku standardów, dokładnej specyfikacji oraz kilkuset milionów produktów z niej korzystających. Nad jej rozwojem czuwa organizacja IrDA zrzeszająca producentów rozwijających tę technologię.

Technologia IrDA posiada odrębne protokoły do pracy jako sieć LAN (IrLAN), porty szeregowe i równoległe komputera (IrCOMM) czy do wymiany plików (IrOBEX). Do jej zalet należą **niska cena, małe zużycie energii i niewielkie rozmiary układów komunikacyjnych.**

Jest powszechnie używana w telefonach, sprzęcie RTV, komputerach, słuchawkach, klawiaturach, myszkach, drukarkach bezprzewodowych czy aparatach. Wśród robotyków jednak nie cieszy się zbytnią popularnością. Tutaj ustępuje komunikacji radiowej, przewodowej, Bluetoothowi i pilotom. Szkoda, bo mimo swoich ograniczeń mogła by się sprawdzić na przykład w komunikacji między współpracującymi ze sobą robotami, w systemach rozproszonych, do sterowania czy jako zastępstwo dla RS232 przy komunikacji z komputerem. Poza tym podobnie jak w przypadku Bluetooth możliwa by była implementacja sterowania za pomocą telefonu komórkowego.

Dzięki IrDA możemy przesyłać dane z prędkością do 115kb/s dla standardu IrDA 1.0, do 4Mb/s dla 1.1 i do 16Mb/s dla 1.2 pośrednie obsługiwane prędkości to 2.4kb/s, 9.6kb/s, 38.4kb/s, 57,6kb/s, 576kb/s, 1,152Mb/s. Standardy 1.1 i 1.2 są kompatybilne w dół. Urządzenia spełniające standard IrDA 1.0 muszą zapewniać bezbłędną transmisję na zasięg 1m, ale większość urządzeń ma dalszy zasięg sięgający nawet kilkunastu metrów.

Poza tym między urządzeniami nie mogą znajdować się przeszkody nie przepuszczające światła, a kąt padania światła musi się zawierać w granicy +/- 15 stopni. Zero logiczne jest kodowane jako impuls o długości 3/16 okresu transmisji, natomiast jedynka jako brak takiego impulsu. Przed każdym bajtem danych występuje bit startu a po - bit stopu. Jako kontrola błędów wykorzystywane są 16-bitowe sumy kontrolne CRC.

Komunikacja odbywa się w trybie master-slave i jeden master może obsługiwać do ośmiu układów podrzędnych.

W praktyce nie jest potrzebna tak dokładna wiedza o transmisji danych. Zamiast budować od zera moduły komunikacyjne lepiej jest używać gotowych układów takich jak transciever HSDL-3201 firmy HP oraz oraz współpracujący z nim kontroler IrDA Microchipa MCP2150, który przetwarza sygnały w podczerwieni na standard USART.

Dzięki zaimplementowanemu protokołowi IrCOMM powinien być widoczny dla komputera PC **jako wirtualny port COM**. Poniżej schemat układu z MCP2150 dostępny na stronie producenta oraz kilka przydatnych linków dotyczących wspomnianych przeze mnie układów.


Przedstawione przeze mnie informacje o IrDzie bazują tylko na teorii. Zamówiłem już jednak próbki z Microchipa i jak dojdą będę mógł przejść do testów praktycznych. Moim zdaniem IrDA posiada niedoceniony potencjał i w niektórych wypadkach **może okazać się dobrą alternatywą** dla drogich interfejsów bezprzewodowych takich jak Bluetooth czy moduły radiowe.
## Współpraca z kamerą
Jak już wspomniałem mimo, iż ludzkie oko nie widzi światła podczerwonego, **może ono zostać zarejestrowane przez kamerę.** Co z tego wynika? Dioda IR i kamera mogą posłużyć do systemu wizyjnego robota pracującego w nocy.

Początkowo myślałem, że tylko sprzęt nie wyposażony w żaden filtr przepuszcza podczerwień. Szybko jednak okazało się, że takie filtry są montowane praktycznie do wszystkich produktów.

Kiedy popatrzymy w obiektyw kamery czy aparatu pod różnymi kątami przy odpowiednim świetle, szkło będzie miało różowawy kolor. To właśnie przez ten filtr. Okazuje się jednak, że każdy, nawet najlepszy, filtr przepuszcza część promieniowania. Nietrudno się domyślić, że w lepszym sprzęcie filtry będą przepuszczać mniejszą część.

Czyli, aby zbudować własną kamerę na podczerwień wystarczy zdjąć ręcznie ten filtr. Jeżeli przy okazji nie chcemy odbierać światła widzialnego, trzeba w jego miejsce wstawić inny filtr tym razem przepuszczający podczerwień a zatrzymujący światło widzialne. Można go zrobić domowym sposobem używając **początkowej części filmu od aparatu** (tej służącej do zamontowania filmu na rolce), dysku magnetycznego ze środka dyskietki czy taśmy od kasety magnetofonowej lub video. Posiadając tą wiedzę **postanowiłem samemu zrobić taką kamerkę.**

Do systemu wizyjnego z prawdziwego zdarzenia była by potrzebna droga kamera bezprzewodowa. Ja niestety nie dysponuje odpowiednimi środkami. Tym bardziej, że przystosowanie zwykłej kamery do pracy w podczerwieni wymaga rozkręcenia i modyfikacji sprzętowej. Nie mogłem więc sobie pozwolić na takie wydatki. **Kupiłem tanią kamerkę USB.** Może nie sprawdzi się ona w realnych konstrukcjach, ale na pewno nie będzie mi szkoda takiej rozkręcać i modyfikować. W końcu zasada działania pozostaje ta sama i dla droższych rozwiązań a praktyka na tańszym sprzęcie może w przyszłości zapobiec zepsuciu czegoś droższego.

Moja kamerka jest wyposażona dodatkowo w **fotoelement i 6 diod LED**. Układ ten służy do oświetlania pola widzenia kamery, gdy ta znajduje się w ciemnościach. Nie powinno być żadnych problemów, żeby te LEDy wylutować i w ich miejsce dać diody IR. Umożliwiło by to pracę kamery w ciemnościach.

Rozkręciłem więc obudowę kamery, aby zlokalizować filtr podczerwieni. Następnie odkręciłem obiektyw. Filtr musi znajdować się gdzieś pomiędzy soczewką, a matrycą CCD czyli tym układem pod obiektywem wlutowanym do PCB. Jest to szkiełko pod różnymi kątami mogące przybierać kolor różowy, czerwony, a czasem niebieski. U mnie był przyklejony do dolnej części obiektywu i udało mi się go łatwo wyjąć za pomocą nożyka.

Na jego miejsce zamocowałem wycięty kawałek kliszy fotograficznej. Po testach okazało się, że to za mało bo kamera wyłapuje część światła z ledów i z ekranu laptopa. Dołożyłem więc drugą warstwę kliszy. Kamerka dalej wychwytuje silne światło LEDów z odległości około centymetra, ale żadnego innego już nie. Spokojnie więc można było dołożyć jeszcze trzecią warstwę, ale stwierdziłem, że mi to wystarczy.

Klisza trzyma się w końcowej części obiektywu za pomocą drucika zwiniętego w kółko. Można było użyć kleju uważając, aby nie rozlał się za mocno i nie zaburzał przebiegu światła. Jednak moje rozwiązanie okazało się bardzo praktyczne, bo można łatwo dołożyć kolejne warstwy filtra. Poza tym **mogę w miejsce kliszy włożyć z powrotem wyciągnięte szkiełko i wrócić do początkowej konfiguracji.** Poniżej zdjęcie kamerki oraz drugie po rozkręceniu. Strzałką zaznaczyłem lokalizację filtru podczerwieni. To czerwone szkiełko na obiektywie.



Jako ciekawostkę mogę powiedzieć, że na początku wydawało mi się, że uszkodziłem kamerę. Obraz po zhackowaniu kamery był kompletnie nieostry. Okazało się jednak, że ta prymitywna kamera ma zooma ręcznego. Czyli samemu trzeba wkręcać lub wykręcać obiektyw dopasowując ostrość do odległości. Poza tym ostrość sama w sobie nie jest zbyt oszałamiająca. No ale nie można za wiele wymagać od najtańszej kamery USB jaką mogłem kupić.

Poniżej zdjęcia plakatu wiszącego w moim pokoju w kolorze i podczerwieni, oba przy świetle lampy.



Dalej nożyczki na biurku przy zgaszonym świetle na które migałem pilotem, zdjęcie zielonego kaktusa i mojej czarnej koszulki.




W podczerwieni można zobaczyć niektóre zabezpieczenia banknotów. Niestety jako biedny student dysponuje tylko najniższym nominałem... Widać jednak wyraźnie, że niektóre elementy nie są widoczne, szczególnie połowa monety na odwrocie.



Jak wspomniałem na początku - wszystkie ciała emitują promieniowanie w paśmie podczerwieni **zależne od temperatury.** Tę właściwość wykorzystuje się w pirometrach. Postanowiłem więc sprawdzić ten efekt na rozgrzanej lutownicy. Oto zdjęcie w ciemnym pokoju na którym dokładnie widać rozgrzane elementy lutownicy oraz zdjęcie **przy zapalonej lampie, która uniemożliwia identyfikacje nagrzanych elementów.**



Przecież kamery termowizyjne też działają w podczerwieni, więc dlaczego tak się dzieje? Otóż dlatego, że skonstruowana przeze mnie kamera **działa jedynie w pewnym wąskim zakresie podczerwieni, bliskim światłu widzialnemu.** Promieniowanie cieplne natomiast jest najlepiej widoczne dla innego zakresu fal - średniej podczerwieni.

Nie da się domowym sposobem przerobić takiej zwykłej kamery na termowizyjną.

W matrycy CCD kamery termowizyjnej zamiast filtrów RGB stosuje się takie przepuszczające podczerwień, a skala kolorów na obrazie termowizyjnym jest umowna. Oto przykładowy obraz wykonany taką kamerą oraz przyjęta skala barw:

## Dziesiętne krotności jednostek
Poniżej jest tabela wielokrotności i podwielokrotności.

## Czujniki odbiciowe
Zasada działania czujnika odbiciowego jest bardzo prosta. Składa się on z **diody nadawczej oraz odbiornika w postaci fotoelementu.** Poza tym posiada układy służące do zamiany pomiaru na sygnały elektryczne.

Jak sama nazwa wskazuje, wykorzystuje fakt odbicia światła od przeszkody. Czujniki odbiciowe potrafią wykrywać obecność przeszkody w swoim zasięgu. Bardziej zaawansowane analogowe czujniki odległości dają na wyjściu napięcie zależne od dystansu między czujnikiem, a przeszkodą.

Ten typ czujników **stosowany jest powszechnie w robotach** typu [sumo](http://leksykon.forbot.pl/Sumo,105.htm), gdzie służy do znalezienia przeciwnika na dohyo. Innym popularnym zastosowaniem są roboty omijające przeszkody. Mogą też występować w instalacjach budynkowych takich jak alarmy, sterowanie oświetleniem, automatyczne drzwi itp.

Najpopularniejszymi w robotyce przedstawicielami tej grupy są **czujniki firmy SHARP** cyfrowe, oraz analogowe różniące się zasięgiem. Popularne modele to GP2D120XJ00F o zasięgu 4-30cm, GP2Y0A21YK0F o zasięgu 10-80cm oraz GP2Y0A02YK0F o zasięgu 20-150cm.

Zależność napięcia od odległości ma bardzo podobny przebieg dla różnych modeli, różni się jedynie wartościami. Charakterystyczne jest szybkie narastanie napięcia poniżej zakresu pomiarowego, a następnie stabilny spadek w zakresie pomiarowym.


Czujniki tego typu **potrafią wykryć jasne przedmioty z dalszej odległości**, ale jak widać na wykresie, zmierzona odległość dla różnych kolorów jest taka sama. Natomiast w przypadku prostszych sensorów, **kolor powierzchni może wpływać na wykrywaną odległość.**

Innymi czynnikami wpływającymi na działanie czujników mogą być **temperatura, warunki pogodowe czy gładkość powierzchni odbicia.** Poza tym bardzo ważne jest umieszczenie czujnika na odpowiedniej wysokości od podłoża i pod odpowiednim kątem, aby do odbiornika nie trafiał sygnał odbity od podłogi. Wynika to oczywiście z przedstawionych wcześniej własności fizycznych światła. Dobrze wiedzą o tym konstruktorzy robotów sumo, którzy starają się stworzyć konstrukcje ciężkie do wykrycia przez czujniki przeciwnika potrafiące jednocześnie samemu bezbłędnie go wykrywać.

Skoro zasada działania tego typu czujnika nie jest tajemnicą, nic nie stoi na przeszkodzie, aby zbudować samodzielnie własną wersję czujnika przeszkody. Potrzebna jest do tego **dioda IR, scalony demodulator podczerwieni np. popularny TSOP** oraz trochę elementów biernych.

Dlaczego nie opłaca się używać zwykłego fotoelementu? Układ z fototranzystorem służący do odbioru ciągłego światła z diody ma poważną wadę - **będzie odbierać również sygnały z innych źródeł.** Rozwiązaniem jest modulacja częstotliwościowa sygnału. Zamiast sygnału ciągłego, wysyłamy impulsy o wybranej przez nas częstotliwości. Dzięki temu odbiornik wie, że tylko sygnały posiadające tą częstotliwość zostały wysłane przez nas i może je odfiltrować od szumów.

Oczywiście możemy za pomocą fototranzystora zbudować demodulator, ale jego parametry na pewno będą gorsze niż w gotowym dekoderze. Układ czujnika powinien składać się z części służącej do generacji impulsów przez diodę, oraz części odbiornika ograniczonej praktycznie jedynie do detektora oraz ewentualnie jakiś LEDów sygnalizujących stan. Układ do generacji impulsów można wykonać na przykład **na bramkach logicznych lub na układzie NE555**.

Aby taki czujnik własnej roboty działał trzeba pamiętać o jednej rzeczy. Promień z diody IR może rozchodzić się również na boki i trafiać bezpośrednio do odbiornika przekłamując wyniki. Dlatego właśnie nadajnik i odbiornik muszą być od siebie oddzielone materiałem nie przepuszczającym światła. Doskonale nadaje się do tego rurka termokurczliwa. W internecie bardzo prosto jest znaleźć tutoriale zawierające schematy i instrukcje krok po kroku jak zbudować taki sensor.
## Bęben światłoczuły
Jest pokryty warstwą emulsji światłoczułej. Ta specjalna substancja przewodzi prąd, gdy jest oświetlona, i przestaje przewodzić, gdy światło znika. Stąd jego nazwa – **bęben światłoczuły**.


Jest to podstawowy element drukarki laserowej. Bęben obraca się. Najpierw zostaje naelektryzowany na całej szerokości. Zjawisko elektryzowania jest dokładnie takie samo jak w przypadku pocierania plastikowego długopisu o suche włosy – na jego powierzchni osiądą ładunki elektrostatyczne, które przyciągają np. drobiny papieru, nitki i inne lekkie obiekty. Różnica jest taka, że drukarka do elektryzowania wykorzystuje (wydajniejszy od długopisu i włosów) generator wysokiego napięcia. Napięcie wędruje po specjalnej listewce do bębna, ładując go tak, jakby był zwykłym kondensatorem.


Bęben obraca się dalej. Na jego naelektryzowaną powierzchnię padają promienie światła, których źródłem jest laser. W miejscach, które zostaną oświetlone, ładunek elektryczny znika, ponieważ światłoczuła warstwa przez chwilę przewodzi w tym miejscu prąd. To tak, jakby maleńkiemu kondensatorowi zostały zwarte wyprowadzenia. Pozostałe miejsca zachowują swój ładunek.


Laserem steruje kontroler drukarki. Jego zadaniem jest konwertowanie przesłanego komputerowego obrazu na zestaw instrukcji zmieniających jasność wiązki lasera, miejsce jej padania oraz kąt obrotu bębna. Taki „elektrostatyczny obraz” jest tworzony na bębnie linia po linii, z bardzo dużą precyzją.

**Wirujące zwierciadło**

O ile sam laser (np. dioda laserowa) umieszczony jest na stałe, o tyle wiązka światła laserowego jest odchylana przez wirujący wielokąt foremny oklejony zwierciadłami. Kąt obrotu zwierciadła określa potencjalne położenie plamki lasera, a odpowiednie włączanie i wyłączanie tego lasera pozwala oświetlić (lub nie) wybrany punkt na bębnie. Światło może też trafić po drodze na specjalne soczewki, które poprawiają precyzję sterowania, ale dla uproszczenia opisu działania można je pominąć.


Czemu wirujące zwierciadło ma postać wielokąta? Po pierwsze – jeden pełny obrót takiego wielokąta obsługuje kilka linii wydruku; każde zwierciadło (bok wielokąta) to jedna pełna droga plamki lasera przez całą szerokość bębna. Po drugie – wirujący element musi być dobrze wyważony, aby nie wywoływać niszczycielskich wibracji w urządzeniu. Symetryczna figura rozwiązuje ten problem.
## Toner
To proszek, który zawiera pigment w wybranym kolorze, np. czarnym. Ponieważ jest bardzo drobny, jego drobinki są przyciągane przez naelektryzowane miejsca bębna światłoczułego i w ten sposób opuszczają swój zasobnik, zwany kasetą.

Aby dodatkowo „zachęcić” drobinki tonera do osiadania na powierzchni bębna, są one elektryzowane ładunkiem przeciwnym niż ten, który pokrywa bęben światłoczuły w miejscach zaciemnienia. Ładunki o różnych znakach przyciągają się, przez co proszek jeszcze dokładniej pokrywa wybrane miejsca.


W czasie gdy na bębnie pojawiają się pierwsze elektrostatyczne wzory, z podajnika na papier wyciągana jest pojedyncza kartka papieru. Robią to gumowe rolki napędzane przez niewielki [silnik DC](https://forbot.pl/blog/jak-dzialaja-szczotkowe-silniki-dc-budowa-i-pomiary-id6788). Taka kartka nie może być zabrudzona ani zakurzona, bo to mogłoby zniszczyć delikatne elementy drukarki. Kolejnym wymaganiem są równe krawędzie i dobrze dobrane wymiary, aby przeszła ona bez zacięć i zagnieceń przez cały mechanizm.

Część bębna, na której jest już toner, w następnej fazie spotyka się z kartką. Chropowata powierzchnia papieru dobrze przejmuje drobiny z bębna. Dodatkową „zachętą” jest specjalna, naelektryzowana listewka. Znajduje się ona tuż pod kartką i posiada silniejszy ładunek o przeciwnym znaku, dzięki czemu przyciąga proszek skuteczniej od bębna.


Mamy już obraz na papierze, ale jest on bardzo nietrwały. Wystarczy dmuchnięcie, by się rozmazał. Dlatego potrzebne jest jego utrwalenie. Robią to nagrzane do wysokiej temperatury (rzędu 200ºC) wałki, między którymi przejeżdża kartka. Silnie ją ściskają, jednocześnie rozgrzewając niczym żelazko. Toner lekko topi się i wnika w strukturę papieru. Gdy stężeje, bardzo trudno go oddzielić.

Ostatnim etapem pracy drukarki laserowej jest wysunięcie jeszcze ciepłej kartki na tacę, z której możemy ją odebrać. Nie trzeba czekać, aż ostygnie – utrwalanie zachodzi w temperaturze znacznie wyższej niż temperatura otoczenia, więc nie ma obawy o zniszczenie wydruku na tym etapie.

**Jak działa kolorowa drukarka laserowa**

Laserowe drukarki kolorowe działają identycznie jak drukarki monochromatyczne (czarno-białe). Z tą różnicą, że mają nie jeden, a cztery  zasobniki z tonerami – każdy w innym kolorze. Kolory tonerów są odpowiednio dobrane, tworzą tzw. paletę CMYK (ang. cyan, magenta, yellow, black – nazwy kolorów). Z odpowiedniego zmieszania tych barw składowych można uzyskać dowolny inny kolor. Kolory te są nanoszone przez jeden lub cztery oddzielne bębny światłoczułe. W pierwszym przypadku kartka przesuwa się przez wspólny bęben cztery razy – za każdym razem barwiąc się na inny kolor.